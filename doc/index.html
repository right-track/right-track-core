<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="About.html">About</a></li><li><a href="Agency.html">Agency</a></li><li><a href="DateTime.html">DateTime</a><ul class='methods'><li data-type='method'><a href="DateTime.html#.create">create</a></li><li data-type='method'><a href="DateTime.html#.createFromDate">createFromDate</a></li><li data-type='method'><a href="DateTime.html#.createFromJSDate">createFromJSDate</a></li><li data-type='method'><a href="DateTime.html#.createFromTime">createFromTime</a></li><li data-type='method'><a href="DateTime.html#.now">now</a></li><li data-type='method'><a href="DateTime.html#clone">clone</a></li><li data-type='method'><a href="DateTime.html#deltaDays">deltaDays</a></li><li data-type='method'><a href="DateTime.html#deltaMins">deltaMins</a></li><li data-type='method'><a href="DateTime.html#getDateDOW">getDateDOW</a></li><li data-type='method'><a href="DateTime.html#getDateInt">getDateInt</a></li><li data-type='method'><a href="DateTime.html#getTimeGTFS">getTimeGTFS</a></li><li data-type='method'><a href="DateTime.html#getTimeReadable">getTimeReadable</a></li><li data-type='method'><a href="DateTime.html#getTimeSeconds">getTimeSeconds</a></li><li data-type='method'><a href="DateTime.html#isDateSet">isDateSet</a></li><li data-type='method'><a href="DateTime.html#toHTTPString">toHTTPString</a></li><li data-type='method'><a href="DateTime.html#toMySQLString">toMySQLString</a></li><li data-type='method'><a href="DateTime.html#toString">toString</a></li></ul></li><li><a href="Favorite.html">Favorite</a><ul class='methods'><li data-type='method'><a href="Favorite.html#.createStation">createStation</a></li><li data-type='method'><a href="Favorite.html#.createTrip">createTrip</a></li><li data-type='method'><a href="Favorite.html#.sortBySequence">sortBySequence</a></li><li data-type='method'><a href="Favorite.html#isStation">isStation</a></li><li data-type='method'><a href="Favorite.html#isTrip">isTrip</a></li></ul></li><li><a href="Holiday.html">Holiday</a></li><li><a href="Link.html">Link</a></li><li><a href="Route.html">Route</a><ul class='methods'><li data-type='method'><a href="Route.html#.sortByName">sortByName</a></li></ul></li><li><a href="Service.html">Service</a></li><li><a href="ServiceException.html">ServiceException</a></li><li><a href="StationFeed.html">StationFeed</a></li><li><a href="StationFeedDeparture.html">StationFeedDeparture</a><ul class='methods'><li data-type='method'><a href="StationFeedDeparture.html#.sort">sort</a></li></ul></li><li><a href="StationFeedDepartureStatus.html">StationFeedDepartureStatus</a></li><li><a href="Stop.html">Stop</a><ul class='methods'><li data-type='method'><a href="Stop.html#.sortByDistance">sortByDistance</a></li><li data-type='method'><a href="Stop.html#.sortById">sortById</a></li><li data-type='method'><a href="Stop.html#.sortByName">sortByName</a></li><li data-type='method'><a href="Stop.html#.sortByTransferWeight">sortByTransferWeight</a></li><li data-type='method'><a href="Stop.html#setDistance">setDistance</a></li></ul></li><li><a href="StopTime.html">StopTime</a><ul class='methods'><li data-type='method'><a href="StopTime.html#.sortByStopSequence">sortByStopSequence</a></li><li data-type='method'><a href="StopTime.html#.sortByStopTransferWeight">sortByStopTransferWeight</a></li></ul></li><li><a href="Trip.html">Trip</a><ul class='methods'><li data-type='method'><a href="Trip.html#getStopTime">getStopTime</a></li><li data-type='method'><a href="Trip.html#hasStopTime">hasStopTime</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-_.html">/</a></li><li><a href="module-gtfs.html">gtfs</a></li><li><a href="module-gtfs_Agency.html">gtfs/Agency</a></li><li><a href="module-gtfs_Route.html">gtfs/Route</a></li><li><a href="module-gtfs_Service.html">gtfs/Service</a></li><li><a href="module-gtfs_ServiceException.html">gtfs/ServiceException</a></li><li><a href="module-gtfs_Stop.html">gtfs/Stop</a></li><li><a href="module-gtfs_StopTime.html">gtfs/StopTime</a></li><li><a href="module-gtfs_Trip.html">gtfs/Trip</a></li><li><a href="module-query.html">query</a><ul class='methods'><li data-type='method'><a href="module-query.html#.clearCache">clearCache</a></li></ul></li><li><a href="module-query_about.html">query/about</a><ul class='methods'><li data-type='method'><a href="module-query_about.html#~getAbout">getAbout</a></li></ul></li><li><a href="module-query_calendar.html">query/calendar</a><ul class='methods'><li data-type='method'><a href="module-query_calendar.html#~getService">getService</a></li><li data-type='method'><a href="module-query_calendar.html#~getServiceExceptions">getServiceExceptions</a></li><li data-type='method'><a href="module-query_calendar.html#~getServicesDefault">getServicesDefault</a></li><li data-type='method'><a href="module-query_calendar.html#~getServicesEffective">getServicesEffective</a></li></ul></li><li><a href="module-query_holiday.html">query/holiday</a><ul class='methods'><li data-type='method'><a href="module-query_holiday.html#~getHoliday">getHoliday</a></li><li data-type='method'><a href="module-query_holiday.html#~getHolidays">getHolidays</a></li><li data-type='method'><a href="module-query_holiday.html#~isHoliday">isHoliday</a></li></ul></li><li><a href="module-query_links.html">query/links</a><ul class='methods'><li data-type='method'><a href="module-query_links.html#~getLinkCategories">getLinkCategories</a></li><li data-type='method'><a href="module-query_links.html#~getLinks">getLinks</a></li><li data-type='method'><a href="module-query_links.html#~getLinksByCategory">getLinksByCategory</a></li></ul></li><li><a href="module-query_routegraph.html">query/routegraph</a><ul class='methods'><li data-type='method'><a href="module-query_routegraph.html#~getNextStops">getNextStops</a></li></ul></li><li><a href="module-query_routes.html">query/routes</a><ul class='methods'><li data-type='method'><a href="module-query_routes.html#~getRoute">getRoute</a></li><li data-type='method'><a href="module-query_routes.html#~getRoutes">getRoutes</a></li></ul></li><li><a href="module-query_stops.html">query/stops</a><ul class='methods'><li data-type='method'><a href="module-query_stops.html#~getStop">getStop</a></li><li data-type='method'><a href="module-query_stops.html#~getStopByName">getStopByName</a></li><li data-type='method'><a href="module-query_stops.html#~getStopByStatusId">getStopByStatusId</a></li><li data-type='method'><a href="module-query_stops.html#~getStops">getStops</a></li><li data-type='method'><a href="module-query_stops.html#~getStopsByLocation">getStopsByLocation</a></li><li data-type='method'><a href="module-query_stops.html#~getStopsByRoute">getStopsByRoute</a></li><li data-type='method'><a href="module-query_stops.html#~getStopsWithStatus">getStopsWithStatus</a></li></ul></li><li><a href="module-query_stoptimes.html">query/stoptimes</a><ul class='methods'><li data-type='method'><a href="module-query_stoptimes.html#~getStopTimeByTripStop">getStopTimeByTripStop</a></li><li data-type='method'><a href="module-query_stoptimes.html#~getStopTimesByTrip">getStopTimesByTrip</a></li></ul></li><li><a href="module-query_trips.html">query/trips</a><ul class='methods'><li data-type='method'><a href="module-query_trips.html#~getTrip">getTrip</a></li><li data-type='method'><a href="module-query_trips.html#~getTripByDeparture">getTripByDeparture</a></li><li data-type='method'><a href="module-query_trips.html#~getTripByShortName">getTripByShortName</a></li></ul></li><li><a href="module-rt.html">rt</a></li><li><a href="module-rt_About.html">rt/About</a></li><li><a href="module-rt_Favorite.html">rt/Favorite</a></li><li><a href="module-rt_Holiday.html">rt/Holiday</a></li><li><a href="module-rt_Link.html">rt/Link</a></li><li><a href="module-rt_StationFeed.html">rt/StationFeed</a></li><li><a href="module-rt_StationFeed_StationFeed.html">rt/StationFeed/StationFeed</a></li><li><a href="module-rt_StationFeed_StationFeedDeparture.html">rt/StationFeed/StationFeedDeparture</a></li><li><a href="module-rt_StationFeed_StationFeedDepartureStatus.html">rt/StationFeed/StationFeedDepartureStatus</a></li><li><a href="module-utils.html">utils</a></li><li><a href="module-utils_calc.html">utils/calc</a><ul class='methods'><li data-type='method'><a href="module-utils_calc.html#~distance">distance</a></li></ul></li><li><a href="module-utils_DateTime.html">utils/DateTime</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Right Track Core Library</h1><p><strong>node module:</strong> <a href="https://www.npmjs.com/package/right-track-core">right-track-core</a><br><strong>GitHub repo:</strong> <a href="https://github.com/right-track/right-track-core">right-track/right-track-core</a></p>
<hr>
<p>This Node module contains the core data classes and functionality of the
<a href="https://github.com/right-track/">Right Track Library</a>. It can query a 
<em>Right Track Database</em> (a combination of GTFS data and additional custom data) 
that is built using the <a href="https://github.com/right-track/right-track-db-build">right-track-db-build</a> 
module and create data classes representing the queried data.</p>
<p>This module is a requirement for the <a href="https://github.com/right-track/right-track-server">right-track-server</a>, 
the <a href="https://github.com/right-track/right-track-online">right-track-online</a> website 
and the planned upcoming right track mobile apps.</p>
<p>Agency specific functionality (such as real-time feed information) is 
added through the various <a href="https://github.com/right-track/right-track-agency">right-track-agency-{id}</a> 
modules.</p>
<h3>Features and Functionality</h3><p>This project is still very much a work in progress and is being actively 
developed.  Functionality may be added and/or removed without notice.</p>
<p>Currently, the module supports the following features:</p>
<ul>
<li>GTFS Data Models:<ul>
<li>Agency</li>
<li>Route</li>
<li>Service (from gtfs calendar.txt)</li>
<li>ServiceException (from gtfs calendar_dates.txt)</li>
<li>Stop</li>
<li>StopTime</li>
<li>Trip</li>
</ul>
</li>
<li>Right Track Data Models:<ul>
<li>About (database metadata)</li>
<li>Favorite (Class for User favorites - station and trips)</li>
<li>Holiday (service information for holidays)</li>
<li>Link (links for additional transit resources)</li>
<li>Station Real-Time Status Feed<ul>
<li>Station Feed</li>
<li>Station Feed Departure</li>
<li>Station Feed Departure Status</li>
</ul>
</li>
</ul>
</li>
<li>Right Track Database queries</li>
<li>General purpose utility functions</li>
</ul>
<h3>Documentation</h3><p>Full documentation can be found in the <strong>/doc/</strong> directory in this 
repository or online at <a href="https://docs.righttrack.io/right-track-core">https://docs.righttrack.io/right-track-core</a></p>
<h3>Module Structure</h3><p>This module is essentially a bundled group of sub-modules representing each of 
the supported data types.  To import the entire collection, <code>require</code> the 
<code>right-track-core</code> module.  The returned Object will be a collection of all of 
the sub-modules that follows a package-like structure mirroring the module paths.</p>
<p>For example, to get the GTFS <code>Agency</code> class from the collection:</p>
<pre class="prettyprint source lang-jacascript"><code>const core = require('right-track-core');
const Agency = core.gtfs.Agency;</code></pre><p>Sub-modules can also be loaded individually by requiring the specific module:</p>
<pre class="prettyprint source lang-javascript"><code>const Agency = require('right-track-core/modules/gtfs/Agency');</code></pre><p>Refer to the <strong>Documentation</strong> for the complete module structure.</p>
<h3>Usage</h3><h4>Create a GTFS data class</h4><pre class="prettyprint source lang-javascript"><code>const core = require('right-track-core');
const Agency = core.gtfs.Agency;
const Route = core.gtfs.Route;

// Create a new Agency for Metro North Railroad
let metroNorth = new Agency('Metro North Railroad', 'https://mta.info/mnr', 'America/New_York', 'mnr');
console.log(metroNorth);
// Agency {
//   name: 'Metro North Railroad',
//   url: 'https://mta.info/mnr',
//   timezone: 'America/New_York',
//   id: 'mnr' 
// }


// Create a new Route for the New Haven Line
let newHavenLine = new Route('nh', 'new haven', 'New Haven Line', Route.ROUTE_TYPE_RAIL, metroNorth, 'ff0000', '000000');
console.log(newHavenLine);
// Route {
//   id: 'nh',
//   shortName: 'new haven',
//   longName: 'New Haven Line',
//   type: 2,
//   agency:
//     Agency {
//       name: 'Metro North Railroad',
//       url: 'https://mta.info/mnr',
//       timezone: 'America/New_York',
//       id: 'mnr' 
//     },
//   color: 'ff0000',
//   textColor: '000000' 
// }</code></pre><h4>Query a Right Track Database</h4><p>The <em>query</em> functions of this module query a specific type of SQLite database 
(<a href="https://github.com/right-track/right-track-db-build">Right Track Database</a>) that 
contains the GTFS data and additional Right Track data. In order to make a query, 
there are two additional dependencies:</p>
<ul>
<li><p>A <strong>RightTrackDB</strong> Class Object. This acts as a SQLite wrapper that provides 
the actual SQLite functionality.  The <a href="https://github.com/right-track/right-track-db-sqlite3">right-track-db-sqlite3</a> 
module provides this functionality using the <a href="https://github.com/mapbox/node-sqlite3">node-sqlite3</a> 
module and should work in any environment supported by node-sqlite3.</p>
</li>
<li><p>A <strong>Right Track Agency</strong> implementation.  This provides the agency-specific 
configuration properties as well as the agency's Right Track Database (or the 
location of the database).</p>
</li>
</ul>
<p>The following example queries the information for a <code>Stop</code> with id <code>110</code> from a 
Right Track Database for <a href="https://github.com/right-track/right-track-agency-mnr">Metro North Railroad</a>. </p>
<pre class="prettyprint source lang-javascript"><code>const core = require('right-track-core');
const RightTrackDB = require('right-track-db-sqlite3');
const MNR = require('right-track-agency-mnr');

// Create the Right Track DB using the MNR Right Track Agency
let db = new RightTrackDB(MNR);

// Query the database for the stop with ID == '110'
core.query.stops.getStop(db, '110', function(err, stop) {
  console.log(stop);
});

// Returns Stop:
// Stop {
//   id: '110',
//   name: 'Larchmont',
//   lat: 40.933394,
//   lon: -73.759792,
//   url: 'http://as0.mta.info/mnr/stations/station_detail.cfm?key=208',
//   wheelchairBoarding: 1,
//   statusID: '110',
//   transferWeight: 1171 
// }</code></pre></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 09 2018 18:16:28 GMT-0500 (EST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
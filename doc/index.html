<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-gtfs_Agency-Agency.html">Agency</a></li><li><a href="module-gtfs_Route-Route.html">Route</a><ul class='methods'><li data-type='method'><a href="module-gtfs_Route-Route.html#.sortByName">sortByName</a></li></ul></li><li><a href="module-gtfs_ServiceException-ServiceException.html">ServiceException</a></li><li><a href="module-gtfs_Service-Service.html">Service</a></li><li><a href="module-gtfs_StopTime-StopTime.html">StopTime</a><ul class='methods'><li data-type='method'><a href="module-gtfs_StopTime-StopTime.html#.sortByStopSequence">sortByStopSequence</a></li><li data-type='method'><a href="module-gtfs_StopTime-StopTime.html#.sortByStopTransferWeight">sortByStopTransferWeight</a></li></ul></li><li><a href="module-gtfs_Stop-Stop.html">Stop</a><ul class='methods'><li data-type='method'><a href="module-gtfs_Stop-Stop.html#.sortById">sortById</a></li><li data-type='method'><a href="module-gtfs_Stop-Stop.html#.sortByName">sortByName</a></li><li data-type='method'><a href="module-gtfs_Stop-Stop.html#.sortByTransferWeight">sortByTransferWeight</a></li></ul></li><li><a href="module-gtfs_Trip-Trip.html">Trip</a><ul class='methods'><li data-type='method'><a href="module-gtfs_Trip-Trip.html#getStopTime">getStopTime</a></li><li data-type='method'><a href="module-gtfs_Trip-Trip.html#hasStopTime">hasStopTime</a></li></ul></li><li><a href="module-rt_About-About.html">About</a></li><li><a href="module-rt_Favorite-Favorite.html">Favorite</a><ul class='methods'><li data-type='method'><a href="module-rt_Favorite-Favorite.html#.createStation">createStation</a></li><li data-type='method'><a href="module-rt_Favorite-Favorite.html#.createTrip">createTrip</a></li><li data-type='method'><a href="module-rt_Favorite-Favorite.html#.sortBySequence">sortBySequence</a></li><li data-type='method'><a href="module-rt_Favorite-Favorite.html#isStation">isStation</a></li><li data-type='method'><a href="module-rt_Favorite-Favorite.html#isTrip">isTrip</a></li></ul></li><li><a href="module-rt_Holiday-Holiday.html">Holiday</a></li><li><a href="module-rt_Link-Link.html">Link</a></li><li><a href="module-rt_StationFeed-StationFeed.html">StationFeed</a><ul class='methods'><li data-type='method'><a href="module-rt_StationFeed-StationFeed.html#.StationFeedDeparture.sort">StationFeedDeparture.sort</a></li></ul></li><li><a href="module-rt_StationFeed-StationFeed.StationFeedDeparture.html">StationFeedDeparture</a></li><li><a href="module-rt_StationFeed-StationFeed.StationFeedDepartureStatus.html">StationFeedDepartureStatus</a></li><li><a href="module-utils_DateTime-DateTime.html">DateTime</a><ul class='methods'><li data-type='method'><a href="module-utils_DateTime-DateTime.html#.create">create</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#.createFromDate">createFromDate</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#.createFromJSDate">createFromJSDate</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#.createFromTime">createFromTime</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#.now">now</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#clone">clone</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#deltaDays">deltaDays</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#deltaMins">deltaMins</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#getDateDOW">getDateDOW</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#getDateInt">getDateInt</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#getTimeGTFS">getTimeGTFS</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#getTimeReadable">getTimeReadable</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#getTimeSeconds">getTimeSeconds</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#isDateSet">isDateSet</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#toHTTPString">toHTTPString</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#toMySQLString">toMySQLString</a></li><li data-type='method'><a href="module-utils_DateTime-DateTime.html#toString">toString</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-gtfs.html">gtfs</a></li><li><a href="module-gtfs_Agency.html">gtfs/Agency</a></li><li><a href="module-gtfs_Route.html">gtfs/Route</a></li><li><a href="module-gtfs_Service.html">gtfs/Service</a></li><li><a href="module-gtfs_ServiceException.html">gtfs/ServiceException</a></li><li><a href="module-gtfs_Stop.html">gtfs/Stop</a></li><li><a href="module-gtfs_StopTime.html">gtfs/StopTime</a></li><li><a href="module-gtfs_Trip.html">gtfs/Trip</a></li><li><a href="module-query.html">query</a></li><li><a href="module-query_about.html">query/about</a><ul class='methods'><li data-type='method'><a href="module-query_about.html#~getAbout">getAbout</a></li></ul></li><li><a href="module-query_calendar.html">query/calendar</a><ul class='methods'><li data-type='method'><a href="module-query_calendar.html#~getService">getService</a></li><li data-type='method'><a href="module-query_calendar.html#~getServiceExceptions">getServiceExceptions</a></li><li data-type='method'><a href="module-query_calendar.html#~getServicesDefault">getServicesDefault</a></li><li data-type='method'><a href="module-query_calendar.html#~getServicesEffective">getServicesEffective</a></li></ul></li><li><a href="module-query_holiday.html">query/holiday</a><ul class='methods'><li data-type='method'><a href="module-query_holiday.html#~getHoliday">getHoliday</a></li><li data-type='method'><a href="module-query_holiday.html#~getHolidays">getHolidays</a></li><li data-type='method'><a href="module-query_holiday.html#~isHoliday">isHoliday</a></li></ul></li><li><a href="module-query_links.html">query/links</a><ul class='methods'><li data-type='method'><a href="module-query_links.html#~getLinkCategories">getLinkCategories</a></li><li data-type='method'><a href="module-query_links.html#~getLinks">getLinks</a></li><li data-type='method'><a href="module-query_links.html#~getLinksByCategory">getLinksByCategory</a></li></ul></li><li><a href="module-query_routes.html">query/routes</a><ul class='methods'><li data-type='method'><a href="module-query_routes.html#~getRoute">getRoute</a></li><li data-type='method'><a href="module-query_routes.html#~getRoutes">getRoutes</a></li></ul></li><li><a href="module-query_stops.html">query/stops</a><ul class='methods'><li data-type='method'><a href="module-query_stops.html#~getStop">getStop</a></li><li data-type='method'><a href="module-query_stops.html#~getStopByName">getStopByName</a></li><li data-type='method'><a href="module-query_stops.html#~getStopByStatusId">getStopByStatusId</a></li><li data-type='method'><a href="module-query_stops.html#~getStops">getStops</a></li><li data-type='method'><a href="module-query_stops.html#~getStopsByRoute">getStopsByRoute</a></li><li data-type='method'><a href="module-query_stops.html#~getStopsWithStatus">getStopsWithStatus</a></li></ul></li><li><a href="module-query_stoptimes.html">query/stoptimes</a><ul class='methods'><li data-type='method'><a href="module-query_stoptimes.html#~getStopTimeByTripStop">getStopTimeByTripStop</a></li><li data-type='method'><a href="module-query_stoptimes.html#~getStopTimesByTrip">getStopTimesByTrip</a></li></ul></li><li><a href="module-query_trips.html">query/trips</a><ul class='methods'><li data-type='method'><a href="module-query_trips.html#~getTrip">getTrip</a></li><li data-type='method'><a href="module-query_trips.html#~getTripByDeparture">getTripByDeparture</a></li></ul></li><li><a href="module-rt.html">rt</a></li><li><a href="module-rt_About.html">rt/About</a></li><li><a href="module-rt_Favorite.html">rt/Favorite</a></li><li><a href="module-rt_Holiday.html">rt/Holiday</a></li><li><a href="module-rt_Link.html">rt/Link</a></li><li><a href="module-rt_StationFeed.html">rt/StationFeed</a></li><li><a href="module-utils.html">utils</a></li><li><a href="module-utils_DateTime.html">utils/DateTime</a></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>Right Track Core Library</h1><p>This Node module contains the core data classes and functionality of the
<a href="https://github.com/right-track/">Right Track Library</a>. It can query a 
<em>Right Track Database</em> (a combination of GTFS data and additional custom data) 
that is built using the <a href="https://github.com/right-track/right-track-db-build">right-track-db-build</a> 
module and create data classes representing the data.</p>
<p>This module is a requirement for the <a href="https://github.com/right-track/right-track-server">right-track-server</a>, 
the <a href="https://github.com/right-track/right-track-online">right-track-online</a> website 
and the planned upcoming right track mobile apps.</p>
<p>Agency specific functionality (such as real-time feed information) is 
added through the various <a href="https://github.com/right-track/right-track-agency-template">right-track-agency-{id}</a> 
modules.</p>
<h3>Features and Functionality</h3><p>This project is still very much a work in progress and is being actively 
developed.  Functionality may be added and/or removed without notice.</p>
<p>Currently, the module supports the following features:</p>
<ul>
<li>GTFS Data Models for the following classes:<ul>
<li>Agency</li>
<li>Route</li>
<li>Service (from gtfs calendar.txt)</li>
<li>ServiceException (from gtfs calendar_dates.txt)</li>
<li>Stop</li>
<li>StopTime</li>
<li>Trip</li>
</ul>
</li>
<li>Right Track Data Models<ul>
<li>About (database metadata)</li>
<li>Favorite (Class structure for User favorites - station and trips)</li>
<li>Holiday (service information for holidays)</li>
<li>Link (links for additional transit resources)</li>
<li>Station Feed (real-time status feed for departures from a single Stop)<ul>
<li>Station Feed Departure</li>
<li>Station Feed Departure Status</li>
</ul>
</li>
</ul>
</li>
<li>Right Track Database queries</li>
<li>General purpose utility functions</li>
</ul>
<h3>Documentation</h3><p>Full documentation can be found in the <strong>/doc/</strong> directory in this 
repository or online at <a href="https://docs.righttrack.io/right-track-core">https://docs.righttrack.io/right-track-core</a></p>
<h3>Module Structure</h3><p>To use this module, the data classes and query functions are returned 
on import in an Object that follows a package-like structure</p>
<pre class="prettyprint source lang-javascript"><code>const core = require('right-track-core');</code></pre><p>where <code>core</code> is an object with the following structure:</p>
<pre class="prettyprint source"><code>// See full documentation for function parameters
{ 
  query: { 
   about: { 
     getAbout()
   },
   calendar: { 
     getService(),
     getServicesEffective(),
     getServicesDefault(),
     getServiceExceptions() 
   },
   holidays: { 
     getHolidays(),
     getHoliday(),
     isHoliday() 
   },
   links: { 
     getLinkCategories(),
     getLinks(),
     getLinksByCategory() 
   }, 
   routes: { 
     getRoute(),
     getRoutes() 
   },
   stops: { 
     getStop(),
     getStopByName(),
     getStopByStatusId(),
     getStops(),
     getStopsByRoute(),
     getStopsWithStatus() 
   },
   stoptimes: { 
     getStopTimesByTrip(),
     getStopTimeByTripStop() 
   },
   trips: { 
     getTrip(),
     getTripByDeparture() 
   } 
  },
  gtfs: { 
   Agency()
   Route() {
     Route.ROUTE_TYPE_LIGHT_RAIL: 0,
     Route.ROUTE_TYPE_SUBWAY: 1,
     Route.ROUTE_TYPE_RAIL: 2,
     Route.ROUTE_TYPE_BUS: 3,
     Route.ROUTE_TYPE_FERRY: 4,
     Route.ROUTE_TYPE_CABLE_CAR: 5,
     Route.ROUTE_TYPE_GONDOLA: 6,
     Route.ROUTE_TYPE_FUNICULAR: 7,
     Route.sortByName()
   },
   Service() {
     Service.SERVICE_AVAILABLE: 1, 
     Service.SERVICE_UNAVAILABLE: 0
   },
   ServiceException() {
     Service.SERVICE_ADDED: 1, 
     Service.SERVICE_REMOVED: 2
   },
   Stop() { 
     Stop.WHEELCHAIR_BOARDING_UNKNOWN: 0,
     Stop.WHEELCHAIR_BOARDING_YES: 1,
     Stop.WHEELCHAIR_BOARDING_NO: 2,
     Stop.sortById(),
     Stop.sortByName(),
     Stop.sortByTransferWeight()
   },
   StopTime() { 
     StopTime.PICKUP_TYPE_REGULAR: 0,
     StopTime.PICKUP_TYPE_NONE: 1,
     StopTime.PICKUP_TYPE_PHONE_AGENCY: 2,
     StopTime.PICKUP_TYPE_DRIVER_COORDINATION: 3,
     StopTime.DROP_OFF_TYPE_REGULAR: 0,
     StopTime.DROP_OFF_TYPE_NONE: 1,
     StopTime.DROP_OFF_TYPE_PHONE_AGENCY: 2,
     StopTime.DROP_OFF_TYPE_DRIVER_COORDINATION: 3,
     StopTime.sortByStopTransferWeight(),
     StopTime.sortByStopSequence()
   },
   Trip() { 
     Trip.WHEELCHAIR_ACCESSIBLE_UNKNOWN: 0,
     Trip.WHEELCHAIR_ACCESSIBLE_YES: 1,
     Trip.WHEELCHAIR_ACCESSIBLE_N0: 2 
   } 
  },
  rt: {
   About(),
   Favorite() {
     Favorite.FAVORITE_TYPE_STATION: 1,
     Favorite.FAVORITE_TYPE_TRIP: 2,
     Favorite.createStation(),
     Favorite.createTrip(),
     Favorite.sortBySequence()
   },
   Holiday(),
   Link(),
   StationFeed() {
     StationFeed.StationFeedDeparture() {
       StationFeed.StationFeedDeparture.sort()
     },
     StationFeed.StationFeedDepartureStatus()
   }
  },
  utils: { 
   DateTime() {
     DateTime.create(),
     DateTime.now(),
     DateTime.createFromJSDate(),
     DateTime.createFromTime(),
     DateTime.createFromDate()
   }
  }
}</code></pre><h3>Usage</h3><p>Create a GTFS data class</p>
<pre class="prettyprint source lang-javascript"><code>const core = require('right-track-core');

// Create a new Agency for Metro North Railroad
let metroNorth = new core.gtfs.Agency('Metro North Railroad', 'https://mta.info/mnr', 'America/New_York', 'mnr');
console.log(metroNorth);
// Agency {
//   name: 'Metro North Railroad',
//   url: 'https://mta.info/mnr',
//   timezone: 'America/New_York',
//   id: 'mnr' 
// }


// Create a new Route for the New Haven Line
const Route = core.gtfs.Route;
let newHavenLine = new Route('nh', 'new haven', 'New Haven Line', Route.ROUTE_TYPE_RAIL, metroNorth, 'ff0000', '000000');
console.log(newHavenLine);
// Route {
//   id: 'nh',
//   shortName: 'new haven',
//   longName: 'New Haven Line',
//   type: 2,
//   agency:
//     Agency {
//       name: 'Metro North Railroad',
//       url: 'https://mta.info/mnr',
//       timezone: 'America/New_York',
//       id: 'mnr' 
//     },
//   color: 'ff0000',
//   textColor: '000000' 
// }</code></pre><p>Query a <strong>Right Track Database</strong> to get data.</p>
<p>Note: the <em>query</em> functions of this module require a <em>RightTrackDB</em> object as a 
parameter.  This Class is a SQLite wrapper class that provides the actual SQLite 
functionality.  The <strong>right-track-db-sqlite3</strong> module provides this functionality 
using the <a href="https://github.com/mapbox/node-sqlite3">node-sqlite3</a> module.</p>
<pre class="prettyprint source lang-javascript"><code>const core = require('right-track-core');
const RightTrackDB = require('right-track-db-sqlite3');
const mnr = require('right-track-agency-mnr');

// read an additional agency config file (skip this step to use default values)
mnr.config.read('../path/to/config.json');

// Get the agency configuration properties
let config = mnr.config.get();

// Create the Right Track DB using the mnr config
let db = new RightTrackDB(config.id, config.db.location);

// Query the database for the stop with ID == '110'
core.query.stops.getStop(db, '110', function(err, stop) {
  console.log(stop);
});

// Returns Stop:
// Stop {
//   id: '110',
//   name: 'Larchmont',
//   lat: 40.933394,
//   lon: -73.759792,
//   url: 'http://as0.mta.info/mnr/stations/station_detail.cfm?key=208',
//   wheelchairBoarding: 1,
//   statusID: '110',
//   transferWeight: 1171 
// }</code></pre></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sat Oct 07 2017 20:59:33 GMT-0400 (EDT) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>